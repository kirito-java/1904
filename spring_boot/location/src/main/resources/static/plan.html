<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>教学安排</title>
   <link rel="stylesheet" href="./css/bootstrap.css">
   <link rel="stylesheet" href="./css/bootstrap-theme.css">
   <script src="./js/jquery.js"></script>
   <script src="./js/bootstrap.js"></script>
   <script>
        $(function(){
            // 初始化页面数据
            $.get({
                url:'/plan/init',
                success:function(data){
                   
                    for(var i in data.classes){
                        var c = data.classes[i];
                        $('#class').append('<option value="'+c.id+'">'+c.className+'</option>');
                    }

                    for(var i in data.subjects){
                        var s = data.subjects[i];
                        $('#subject').append('<option value="'+s.id+'">'+s.subjectName+'</option>');
                    }
                    for(var i in data.classrooms){
                        var r = data.classrooms[i];
                        $('#classroom').append('<option value="'+r.id+'">'+r.classroomName+'</option>');
                    }
                    for(var i in data.days){
                        var d = data.days[i];
                        $('#day').append('<option value="'+d.id+'">'+d.day+'</option>');
                    }
                    for(var i in data.times){
                        var t = data.times[i];
                        $('#times').append('<option value="'+t.id+'">'+t.timeName+'</option>');    
                    }
                    
                }
            });

            // 添加事件监听
            $('#btnAdd').click(function(e){
                var classID = $('#class').val();
                var subjectID = $('#subject').val();
                var classroomID = $('#classroom').val();
                var dayID = $('#day').val();
                var timesID = $('#times').val();

                $.post('/plan/add',
                       {"myclass.ID":classID, 
                        "subject.ID":subjectID, 
                        "classroom.ID":classroomID,
                        "day.ID":dayID, 
                        "times.ID":timesID},
                       function(data){
                          console.log(data);
                });
            });
            
        });


   </script>
</head>
<body>
   
   <div class="panel panel-default">
         <div class="panel-heading">
               <h3 class="panel-title">添加课程安排</h3>
         </div>
         <div class="panel-body">
               
               <div class="form-group">
                   <div class="col-sm-2">
                       <select name="class" id="class" class="form-control" required="required">
                           
                       </select>
                   </div>
                   <div class="col-sm-2">
                        <select name="subject" id="subject" class="form-control" required="required">
                            
                        </select>
                    </div>
                    <div class="col-sm-2">
                        <select name="classroom" id="classroom" class="form-control" required="required">
                            
                        </select>
                    </div>
                    <div class="col-sm-2">
                         <select name="day" id="day" class="form-control" required="required">
                             
                         </select>
                     </div>
                     <div class="col-sm-2">
                        <select name="times" id="times" class="form-control" required="required">
                            
                        </select>
                    </div>
                    <div class="col-sm-2">
                       <button id="btnAdd" class="btn btn-primary">添加</button>
                    </div>

               </div>
               
         </div>
   </div>
   
</body>
</html>